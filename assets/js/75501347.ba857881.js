"use strict";(globalThis.webpackChunkphysical_ai_robotics_textbook=globalThis.webpackChunkphysical_ai_robotics_textbook||[]).push([[879],{2445:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var n=a(6540),r=a(2785),s=a(6347);const l="authContainer_I8tK",c="authBox_eeMn",i="formGroup_ul3Y",o="submitBtn_KCuA",u="alert_GnvG",m="alertError_w3tE",d="alertSuccess_aXI0",h="divider_bmWp",p="oauthButtons_ALwk",g="oauthBtn_EHI_",v="toggleAuth_RHQT",E=()=>{const[e,t]=(0,n.useState)(""),[a,r]=(0,n.useState)(""),[d,E]=(0,n.useState)(!1),[y,w]=(0,n.useState)(""),[f,S]=(0,n.useState)(!1),b=((0,s.W6)(),"https://my-rag-server.centralindia.cloudapp.azure.com"),N=async()=>{E(!0),w("");try{const t=await fetch(`${b}/auth/jwt/login`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:new URLSearchParams({username:e,password:a})});if(t.ok){const e=await t.json();e.access_token&&localStorage.setItem("access_token",e.access_token),window.location.href="/AI-driven-development/docs/01-intro-to-ros2"}else{let e="Login failed. Please check your credentials.";try{const a=await t.json();a&&a.detail&&(e=Array.isArray(a.detail)?a.detail[0].msg||JSON.stringify(a.detail):a.detail)}catch{}w(e)}}catch(t){if(!f)return S(!0),w("Connecting to the server\u2026 retrying"),void setTimeout(()=>N(),800);w("Cannot reach the server. Please ensure the backend is reachable at the configured HTTPS URL.")}finally{E(!1)}};return n.createElement("div",{className:l},n.createElement("div",{className:c},n.createElement("h2",null,"Sign In"),y&&n.createElement("div",{className:u+" "+m},y),n.createElement("form",{onSubmit:async e=>{e.preventDefault(),await N()}},n.createElement("div",{className:i},n.createElement("input",{type:"email",placeholder:"Email",value:e,onChange:e=>t(e.target.value),required:!0,autoComplete:"email"})),n.createElement("div",{className:i},n.createElement("input",{type:"password",placeholder:"Password",value:a,onChange:e=>r(e.target.value),required:!0,autoComplete:"current-password"})),n.createElement("button",{type:"submit",disabled:d,className:o},d?"Signing in...":"Sign In")),n.createElement("div",{className:h},"OR"),n.createElement("div",{className:p},n.createElement("a",{href:`${b}/auth/google/authorize`,className:g},"\ud83d\udd35 Google"),n.createElement("a",{href:`${b}/auth/github/authorize`,className:g},"\u26ab GitHub")),n.createElement("p",{className:v},"Don't have an account? ",n.createElement("a",{href:"/AI-driven-development/auth?action=signup"},"Sign up"))))},y=()=>{const[e,t]=(0,n.useState)(""),[a,r]=(0,n.useState)(""),[E,y]=(0,n.useState)(""),[w,f]=(0,n.useState)(!1),[S,b]=(0,n.useState)(""),[N,C]=(0,n.useState)(""),[_,A]=(0,n.useState)(0),k=(0,s.W6)(),P="https://my-rag-server.centralindia.cloudapp.azure.com";return n.createElement("div",{className:l},n.createElement("div",{className:c},n.createElement("h2",null,"Create Account"),S&&n.createElement("div",{className:u+" "+m},S),N&&n.createElement("div",{className:u+" "+d},N),n.createElement("form",{onSubmit:async t=>{if(t.preventDefault(),b(""),C(""),a!==E)return void b("Passwords do not match");if(a.length<8)return void b("Password must be at least 8 characters");f(!0);const n=async()=>{try{const t=await fetch(`${P}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:a})});if(t.ok)C("Account created! Redirecting to login..."),setTimeout(()=>{k.push("/AI-driven-development/auth?action=login")},1500);else{let e="Signup failed. Please check your details.";try{const a=await t.json();a&&a.detail&&(e=Array.isArray(a.detail)?a.detail[0].msg||JSON.stringify(a.detail):a.detail)}catch{}b(e)}}catch(t){if(_<2)return A(e=>e+1),b("Connecting to the server\u2026 retrying"),void setTimeout(n,800);b("Cannot reach the server. Please start the backend on port 8001 and try again.")}finally{f(!1)}};n()}},n.createElement("div",{className:i},n.createElement("input",{type:"email",placeholder:"Email",value:e,onChange:e=>t(e.target.value),required:!0,autoComplete:"email"})),n.createElement("div",{className:i},n.createElement("input",{type:"password",placeholder:"Password (min 8 characters)",value:a,onChange:e=>r(e.target.value),required:!0,minLength:"8",autoComplete:"new-password"})),n.createElement("div",{className:i},n.createElement("input",{type:"password",placeholder:"Confirm Password",value:E,onChange:e=>y(e.target.value),required:!0,autoComplete:"new-password"})),n.createElement("button",{type:"submit",disabled:w,className:o},w?"Creating account...":"Create Account")),n.createElement("div",{className:h},"OR"),n.createElement("div",{className:p},n.createElement("a",{href:`${P}/auth/google/authorize`,className:g},"\ud83d\udd35 Google"),n.createElement("a",{href:`${P}/auth/github/authorize`,className:g},"\u26ab GitHub")),n.createElement("p",{className:v},"Already have an account? ",n.createElement("a",{href:"/AI-driven-development/auth?action=login"},"Sign in"))))};const w=function(){const e=(0,s.zy)(),t=new URLSearchParams(e.search).get("action");return n.createElement(r.A,{title:"Auth"},"signup"===t?n.createElement(y,null):n.createElement(E,null))}}}]);